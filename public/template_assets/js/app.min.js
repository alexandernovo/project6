$(function () {
    // Admin Panel settings

    //****************************
    /* This is for the mini-sidebar if width is less then 1170*/
    //****************************
    var setsidebartype = function () {
        var width =
            window.innerWidth > 0 ? window.innerWidth : this.screen.width;
        if (width < 1199) {
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
            $("#main-wrapper").addClass("mini-sidebar");
            $(".body-wrapper").css("margin-left", "0px");
            $(".left-sidebar").addClass("d-none");
        } else {
            $("#main-wrapper").attr("data-sidebartype", "full");
            $("#main-wrapper").removeClass("mini-sidebar");
            $(".body-wrapper").css("margin-left", "270px");
            $(".left-sidebar").removeClass("d-none");
        }
    };
    $(window).ready(setsidebartype);
    $(window).on("resize", setsidebartype);
    //****************************
    /* This is for sidebartoggler*/
    //****************************
    $(".sidebartoggler").on("click", function () {
        $("#main-wrapper").toggleClass("mini-sidebar");
        if ($("#main-wrapper").hasClass("mini-sidebar")) {
            $(".sidebartoggler").prop("checked", !0);
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
            $(".body-wrapper").css("margin-left", "0px");
            $(".left-sidebar").removeClass("d-none");
        } else {
            $(".sidebartoggler").prop("checked", !1);
            $("#main-wrapper").attr("data-sidebartype", "full");
            $(".body-wrapper").css("margin-left", "270px");
            $(".left-sidebar").addClass("d-none");
        }
    });
    $(".sidebartoggler").on("click", function () {
        $("#main-wrapper").toggleClass("show-sidebar");
    });
});

// Sidebar toggle click event
$(document).on("click", ".sidebartoggler", function () {
    $(".left-sidebar").toggleClass("d-none");

    let isHidden = $(".left-sidebar").hasClass("d-none");
    if (isHidden) {
        $(".body-wrapper").css("margin-left", "0px");
    } else {
        $(".body-wrapper").css("margin-left", "270px");
    }
    localStorage.setItem("sidebarHidden", isHidden);
});

setTimeout(function () {
    let sidebarState = localStorage.getItem("sidebarHidden");

    if (sidebarState === "true") {
        $(".left-sidebar").addClass("d-none");
        $(".body-wrapper").css("margin-left", "0px");
    } else {
        $(".left-sidebar").removeClass("d-none");
        $(".body-wrapper").css("margin-left", "270px");
    }

    $("body").css("visibility", "visible");
}, 500);
